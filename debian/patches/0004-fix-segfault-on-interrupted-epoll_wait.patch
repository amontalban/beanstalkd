From fb0a46602de1d0884ea8c33d9e0896b464ccf4c6 Mon Sep 17 00:00:00 2001
From: Danny Guinther <dannyguinther@gmail.com>
Date: Thu, 19 Dec 2013 09:17:14 -0500
Subject: [PATCH] Only process succesfully epoll_events

---
 linux.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/linux.c b/linux.c
index 4564a09..8633441 100644
--- a/linux.c
+++ b/linux.c
@@ -79,7 +79,7 @@ socknext(Socket **s, int64 timeout)
         exit(1);
     }
 
-    if (r) {
+    if (r > 0) {
         *s = ev.data.ptr;
         if (ev.events & (EPOLLHUP|EPOLLRDHUP)) {
             return 'h';
-- 
1.8.5.2

